<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="login-styles.css" />
    <title>Signup</title>
  </head>
  <body>
    <div class="container">
      <div class="screen">
        <div class="screen__content">
          <form class="login" onsubmit="validateSignup(event)">
            <div class="login__field">
              <div style="display: flex; justify-content: center"></div>

              <input
                type="text"
                class="login__input"
                placeholder="Email"
                id="email"
              />
            </div>
            <div class="login__field">
              <i class="login__icon fas fa-lock"></i>
              <input
                type="name"
                class="login__input"
                placeholder="Name"
                id="name"
              />
            </div>
            <div class="login__field">
              <i class="login__icon fas fa-lock"></i>
              <input
                type="password"
                class="login__input"
                placeholder="Password"
                id="password"
              />
            </div>
            <div class="login__field">
              <i class="login__icon fas fa-lock"></i>
              <input
                type="password"
                class="login__input"
                placeholder="Confirm Password"
                id="confirm_password"
              />
            </div>
            <button
              class="button login__submit"
              style="display: flex; justify-content: center"
            >
              Register
            </button>
          </form>
        </div>
        <div class="screen__background">
          <span
            class="screen__background__shape screen__background__shape4"
          ></span>
          <span
            class="screen__background__shape screen__background__shape3"
          ></span>
          <span
            class="screen__background__shape screen__background__shape2"
          ></span>
          <span
            class="screen__background__shape screen__background__shape1"
          ></span>
        </div>
      </div>
    </div>

    <script>
      async function validateSignup(event) {
        event.preventDefault();
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var confirm_password =
          document.getElementById("confirm_password").value;
        alert(
          "Information received: " + "\nName: " + name + "\nEmail: " + email
        );
        if (password !== confirm_password) {
          alert("Please check password");
        }

        const data = {name, email, password};

        try {
          const response = await fetch("http://localhost:5500/api/register", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });

          const responseData = await response.json();
          if (responseData) {
            alert("Response received at backend");
            console.log("Response Data: ", responseData);
          }
          console.log(responseData);
          return true;
        } catch (error) {
          console.log("Error: ",error.message);
          return false;
        }
      }
    </script>
  </body>
</html>
